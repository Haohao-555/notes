<!--
 * @Date: 2021-09-25 13:42:48
 * @Author: 浩
 * @LastEditors: 浩
 * @FilePath: \交互\图形交互.html
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        margin: 0;
      }
      canvas {
        display: block;
        margin: 0 auto;
        background-color: #f0f0f0;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas">tips</canvas>
    <script src="./canvas-tool.js"></script>
    <script>
      var canvas = document.querySelector("#canvas");
      canvas.width = 600;
      canvas.height = 600;

      var ctx = canvas.getContext("2d");

      // 鼠标在canvas的坐标位置 = 鼠标在页面的位置 减去 canvas标签在页面的位置
      var getPosition = function (pageX, pageY) {
        // 获取canvas标签在页面的位置
        var obj = canvas.getBoundingClientRect();
        return {
          x: pageX - obj.left,
          y: pageY - obj.top,
        };
      };

      
      // 绘制矩形
      drawRect(ctx, 100, 50, 200, 50, "red");
      
      /*
        drawRect(ctx,100,50,200,50,"red");
        drawRect(ctx,100,150,200,50,"green");
        drawRect(ctx,100,250,200,50,"blue");
        如果绘制多个图形，只有最后一个会产生交互。
        因此每次重新绘制图像时，需要清除原有的画布使其能够交互
      */

      document.onmousemove = function(event){
            // 获取鼠标在canvas的位置
            var point = getPosition(event.pageX,event.pageY);
           
            // ctx.isPointInPath(坐标) 检测坐标是否出现在绘制路径中
            if(ctx.isPointInPath(point.x,point.y)){
                console.log("移动至矩形");
            }
        }
    </script>
  </body>
</html>
